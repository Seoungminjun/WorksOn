<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/attend_default}">
<head>
    <title>연차현황</title>
</head>
<style layout:fragment="style">

    table {
        width: 100%;
        border-collapse: collapse;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }

    th {
        background-color: #666;
        color: #fff;
    }

    .leave-history-header {
        margin-bottom: 10px;
    }
</style>
<div layout:fragment="content">
    <!-- 스타일 추가된 틀 -->
    <div class="bg-white border border-gray-100 p-4 rounded-lg shadow-xs">

        <!-- 4칸으로 나눈 구조 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-center">

            <!-- 첫 번째 칸: 프로필 사진과 이름 -->
            <div class="col-span-3 md:col-span-1 flex items-center">
                <img class= "object-cover w-20 h-20 rounded-full" th:src="${#authentication.principal.employee.profileUrl != null ? #authentication.principal.employee.profileUrl : 'https://bucket-minjeong2024.s3.ap-northeast-2.amazonaws.com/profile.png'}" alt="" id="profile-preview">
                <div class="ml-4">
                    <h1 class="text-2xl font-bold " th:text="|${#authentication.principal.employee.name} ${#authentication.principal.employee.position.name}|"></h1>
                </div>
            </div>
            <div class="col-span-3 md:col-span-1 flex items-center flex-col">
                <div class="mb-2">
                    <p class="text-gray-600 flex-grow text-2xl">총 연차</p>
                </div>
                <div class="mt-2">
                     <span class="font-bold text-gray-800 text-xl" th:text="|${#authentication.principal.employee.rest}|"></span>
                </div>
            </div>
            <div class="col-span-3 md:col-span-1 flex items-center flex-col">
                <div class="mb-2">
                    <p class="text-gray-600 flex-grow text-2xl">사용 연차</p>
                </div>
                <div class="mt-2">
                    <span class="font-bold text-gray-800 text-xl">5</span>
                </div>
            </div>
            <div class="col-span-3 md:col-span-1 flex items-center flex-col">
                <div class="mb-2">
                    <p class="text-gray-600 flex-grow text-2xl">남은 연차</p>
                </div>
                <div class="mt-2">
                    <span class="font-bold text-gray-800 text-xl">10</span>
                </div>
            </div>
        </div>
    </div>
    <div class="mt-14">
        <form>
            <label for="year">연차 사용기간:</label>
            <select id="year" onchange="updateMonthOptions()">
                <option value="2022">2024년</option>
                <option value="2023">2023년</option>
                <option value="2024">2022년</option>
                <option value="2024">2021년</option>
                <option value="2024">2020년</option>
                <option value="2024">2019년</option>
                <option value="2024">2018년</option>
            </select>
        </form>
    </div>
    <div class="leave-history mt-14">
        <div class="leave-history-header">
            <span class="text-2xl">사용내역</span>
        </div>
        <table>
            <thead>
            <tr>
                <th>이름</th>
                <th>부서명</th>
                <th>휴가종류</th>
                <th>연차 사용기간</th>
                <th>사용 연차</th>
                <th>내용</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="dayoff, status : ${dayoffs}" th:data-dayoff-id="${dayoff.id}">
                <td th:text="|${#authentication.principal.employee.name}|"></td>
                <td th:text="${#authentication.principal.employee.department.name}"></td>
                <td th:text="${dayoff.type}"></td>
                <td th:text="|${#temporals.format(dayoff.startAt, 'yyyy/MM/dd')} ~ ${#temporals.format(dayoff.endAt, 'yyyy/MM/dd')}|"></td>
                <td th:text="${dayoff.count}"></td>
                <td th:text="${dayoff.content}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script layout:fragment="script"></script>
</html>